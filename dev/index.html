<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Thunks.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://tbenst.github.io/Thunks.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Thunks.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tbenst/Thunks.jl/blob/master/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Thunks"><a class="docs-heading-anchor" href="#Thunks">Thunks</a><a id="Thunks-1"></a><a class="docs-heading-anchor-permalink" href="#Thunks" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/tbenst/Thunks.jl">Thunks</a>.</p><ul><li><a href="#Thunks.Checkpointable"><code>Thunks.Checkpointable</code></a></li><li><a href="#Thunks.Reversible"><code>Thunks.Reversible</code></a></li><li><a href="#Thunks.Think"><code>Thunks.Think</code></a></li><li><a href="#Thunks.Thunk"><code>Thunks.Thunk</code></a></li><li><a href="#Thunks.Unevaluated"><code>Thunks.Unevaluated</code></a></li><li><a href="#Thunks._find_symbols_in_ast-Tuple{Any}"><code>Thunks._find_symbols_in_ast</code></a></li><li><a href="#Thunks._thunkify"><code>Thunks._thunkify</code></a></li><li><a href="#Thunks._thunkify_eq"><code>Thunks._thunkify_eq</code></a></li><li><a href="#Thunks._thunkify_expr"><code>Thunks._thunkify_expr</code></a></li><li><a href="#Thunks.find_assigned_symbols_in_ast-Tuple{Any}"><code>Thunks.find_assigned_symbols_in_ast</code></a></li><li><a href="#Thunks.find_symbols_in_ast-Tuple{Any}"><code>Thunks.find_symbols_in_ast</code></a></li><li><a href="#Thunks.maybe_thunk-Tuple{Any, Any}"><code>Thunks.maybe_thunk</code></a></li><li><a href="#Thunks.reify-Tuple{Think}"><code>Thunks.reify</code></a></li><li><a href="#Thunks.thunkify"><code>Thunks.thunkify</code></a></li><li><a href="#Thunks.thunkify_block"><code>Thunks.thunkify_block</code></a></li><li><a href="#Thunks.undo-Tuple{Thunks.WrappedThink}"><code>Thunks.undo</code></a></li><li><a href="#Thunks.undo-Tuple{Reversible}"><code>Thunks.undo</code></a></li><li><a href="#Thunks.@lazy-Tuple{Any}"><code>Thunks.@lazy</code></a></li><li><a href="#Thunks.@noeval-Tuple{Any}"><code>Thunks.@noeval</code></a></li><li><a href="#Thunks.@reversible-Tuple{Any}"><code>Thunks.@reversible</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="Thunks._find_symbols_in_ast-Tuple{Any}" href="#Thunks._find_symbols_in_ast-Tuple{Any}"><code>Thunks._find_symbols_in_ast</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Return either (nothing, List[Expr]), (Symbol, nothing), or (nothing, nothing).</p><p>Helper function following <code>cons</code> and <code>nil</code> pattern from Lisp.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L113-L117">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks._thunkify" href="#Thunks._thunkify"><code>Thunks._thunkify</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Helper function to dispatch based on Expr head.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L188">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks._thunkify_eq" href="#Thunks._thunkify_eq"><code>Thunks._thunkify_eq</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Assign left of <code>=</code> to a thunk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L150">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks._thunkify_expr" href="#Thunks._thunkify_expr"><code>Thunks._thunkify_expr</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Actually create the Thunk struct.</p><p>Wrap expression in anonymous function, with each assigned symbol as an arg.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L163-L167">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.find_assigned_symbols_in_ast-Tuple{Any}" href="#Thunks.find_assigned_symbols_in_ast-Tuple{Any}"><code>Thunks.find_assigned_symbols_in_ast</code></a> — <span class="docstring-category">Method</span></header><section><div><p>We find all &quot;assigned symbols&quot;, as in, everything except:</p><ul><li>anonymous functions :((x,y,z) -&gt; x*x).args[1]</li><li>generators :((x for x in 1:10))</li><li>Reserved keywords</li><li>... others that we should catch...?</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L51-L57">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.find_symbols_in_ast-Tuple{Any}" href="#Thunks.find_symbols_in_ast-Tuple{Any}"><code>Thunks.find_symbols_in_ast</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Walk an AST and find all unique symbols.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L2-L4">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.maybe_thunk-Tuple{Any, Any}" href="#Thunks.maybe_thunk-Tuple{Any, Any}"><code>Thunks.maybe_thunk</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Return true if symbol could be assigned to a Thunk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.reify-Tuple{Think}" href="#Thunks.reify-Tuple{Think}"><code>Thunks.reify</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reify(thunk::Think)
reify(value::Any)</code></pre><p>Reify a thunk into a value.</p><p>In other words, compute the value of the expression.</p><p>We walk through the thunk&#39;s arguments and keywords, recursively evaluating each one, and then evaluating the thunk&#39;s function with the evaluated arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/core.jl#L74-L84">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.thunkify" href="#Thunks.thunkify"><code>Thunks.thunkify</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Rewrite expression for lazy evaluation using thunks. Not intended for public usage.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L130-L133">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.thunkify_block" href="#Thunks.thunkify_block"><code>Thunks.thunkify_block</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Rewrite a begin...end block to be lazy.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L143">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.undo-Tuple{Reversible}" href="#Thunks.undo-Tuple{Reversible}"><code>Thunks.undo</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Undo function call (non-recursively)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/core.jl#L151">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.undo-Tuple{Thunks.WrappedThink}" href="#Thunks.undo-Tuple{Thunks.WrappedThink}"><code>Thunks.undo</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Undo function call (non-recursively)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/core.jl#L158">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.Checkpointable" href="#Thunks.Checkpointable"><code>Thunks.Checkpointable</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A Thunk that can be checkpointed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/core.jl#L53-L55">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.Reversible" href="#Thunks.Reversible"><code>Thunks.Reversible</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A Thunk that can &quot;undo&quot; code evaluation. Does not clear f or args.</p><p>Useful for interactive coding. ie if you revise a function definition, can undo &amp; reify the thunk again.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/core.jl#L36-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.Think" href="#Thunks.Think"><code>Thunks.Think</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for Thunks.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/core.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.Thunk" href="#Thunks.Thunk"><code>Thunks.Thunk</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Thunk(function, args, kwargs)</code></pre><p>Type that represents a thunk. Only <code>evaluated</code> is a public field. Use <code>reify</code> to evaluate. Evaluates to Weak head normal form, meaning that non-free symbols must be assigned / defined. Contrast with Unevaluated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/core.jl#L4-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.Unevaluated" href="#Thunks.Unevaluated"><code>Thunks.Unevaluated</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Keep expression, including args/kwargs, as unevaluated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/core.jl#L22-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.@lazy-Tuple{Any}" href="#Thunks.@lazy-Tuple{Any}"><code>Thunks.@lazy</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@lazy &lt;Expr&gt;</code></pre><p>Lazy evaluation of arbitrary expressions.</p><pre><code class="language-julia hljs">@lazy x+y
@lazy x = f(y)
@lazy begin
    a = 1
    b = 2
    c = 3
    abc = sum([a,b,c])
end
reify(abc)
# output
6</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L202-L219">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.@noeval-Tuple{Any}" href="#Thunks.@noeval-Tuple{Any}"><code>Thunks.@noeval</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@noeval &lt;Expr&gt;</code></pre><p>Lazy evaluation of arbitrary expressions that does not check for variable definition. This is safe to use if the assumption of referential transprency holds, and should be used with extreme caution otherwise, e.g. if referenced variables might be mutated. Note that evaluation occurs in the scope of where <code>reify</code> is called.</p><pre><code class="language-julia hljs">@noeval begin
    # will not error
    not_used = not_defined + 1
    a = 1
    b = 2
    c = 3
    abc = sum([a,b,c])
end
c = -1
reify(abc)
# output
2</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L226-L249">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Thunks.@reversible-Tuple{Any}" href="#Thunks.@reversible-Tuple{Any}"><code>Thunks.@reversible</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@reversible &lt;Expr&gt;</code></pre><p>Lazy evaluation of arbitrary expressions that allows for computation to be undone.</p><pre><code class="language-julia hljs">@reversible begin
    a = 1
    b = 2
    c = 3
    abc = sum([a,b,c])
end
@assert abc.evaluated == false
reify(abc)
@assert abc.evaluated == true
undo(abc)
@assert abc.evaluated == false
reify(abc)
@assert abc.evaluated == true
# output
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tbenst/Thunks.jl/blob/bc07e6e0575cdf275d9cad294f63b791f421abe5/src/macros.jl#L255-L278">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Friday 20 August 2021 10:03">Friday 20 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
